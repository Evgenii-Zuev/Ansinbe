---
- name: Create users
  hosts: linux1
  host_key_checkign: false
  inventory: ./hosts.inventory
  remote_user: user
  become: yes

  tasks:
   - name: Add users to remote server
     user:
       name: "{{ item.name }}"
       comment: "{{ item.name }}@our-mail.list"
       shell: /bin/bash
       createhome: yes
       password: "{{ item.password }}"
     loop:
        - { name: 'Alice', password: '!vault |
          $ANSIBLE_VAULT;1.1;AES256
          35353138376132613631633534376461623537353466333633346633613734393831626566343532
          3562366566356237306536353638306439616461666465320a393937613132323237303732366532
          31336664386462613164626231373263336637333862333939303761303231393333393039343034
          6162356534343333390a353232316265386631356535386635323964643239633864333230343831
          3830' }
        - { name: 'Bob', password: '!vault |
          $ANSIBLE_VAULT;1.1;AES256
          35353138376132613631633534376461623537353466333633346633613734393831626566343532
          3562366566356237306536353638306439616461666465320a393937613132323237303732366532
          31336664386462613164626231373263336637333862333939303761303231393333393039343034
          6162356534343333390a353232316265386631356535386635323964643239633864333230343831
          3830' }
        - { name: 'Carol', password: '!vault |
          $ANSIBLE_VAULT;1.1;AES256
          32353964353737353736623361616631303733343735343665393834346338393530613430333332
          3163633639313661343465633137346262343262623063630a383437323435663265313636383564
          62616563326566303639366638643730306464303765633037393362303236323133613635366434
          3733646565343334360a383936633836303164343961643038316635393830636262366231393238
          3664' }
...
# ansible-vault encrypt_string --stdin-name "Password"
