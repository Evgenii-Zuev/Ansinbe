---
- name: Create Users by list
  hosts: all
  become: yes

  vars:
    # zzz
    Alice_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          30313066616537316237653133633861663161623731386631626665613163386433343365333836
          3966643364646431656266626531626265346565623136650a636636346237663731313431636334
          30613430646264373038383662343037373961316365323066633835303966653632386133393061
          6131636139643562370a313462626436623831663532396531356534653266383434343739663234
          37316564626532626364393266613263346333653865366566333364653439306465333334643132
          33373535623063326430383465353364353032303166386336396639643866363965323764333166
          303666346462366361353033333031616164
    Bob_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          38306331343666383235363835616263623835623133626537363433383861653134353739653162
          3466613661303630383732323939613566343765383266610a623734316233653964326431343534
          37643732306666643761383330623533383865386464666463383366643462386165336633386436
          3036646265306563340a366638323530613263336264336532346261396335653664636663656333
          66336166636437633232623838663438633961303631346438386634636135316266333166336339
          33316261393161633663323831663336366664613738633061613861383936613961646465623932
          326234643930366265306266623364356338
    Carol_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          66643933616161653865333334313230313839303965306666623763323561366565373036333363
          3663613631363161326532656164633464343034623436340a373737393230623736376536393637
          33333933303138393264383935356339303166636431373639306338303865363539653538353138
          6665616534393035620a613030663962386136666433306330633139333536356530336465313263
          38376465306136623937356233323964616166633261643639363437666631313766623137393063
          65356132313731316365643633323337366564626336323333363437313539303439636566313438
          356439356433346462646338333835656466

  tasks:
   - name: Add users to remote server
     user:
       name: "{{ item.name }}"
       comment: "{{ item.name }}@our-mail.list"
       shell: /bin/bash
       createhome: yes
       password: "{{ item.password }}"
     loop:
        - { name: 'Alice', password: "{{ Alice_pass }}" }         # Password123
        - { name: 'Bob', password: "{{ Bob_pass }}" }             # Password321
        - { name: 'Carol', password: "{{Carol_pass}}" }           # Password333
...
